@model IEnumerable<OverlayManagementClient.Models.OverlayNetwork>

<div  class="container p-3">
    <div id="header" class="row pt-4">
        <div class="col-6">
            <h2 class="text-primary">Overlay Network List</h2>
        </div>
        <div class="col-6 text-right">
            <a id="createNetwork" class="btn btn-primary">Create Network</a>
        </div>
    </div>
    <br />

    @if (Model.Count() > 0)
    {
        <table id="networks" class="table table-borderless table-striped" style="width:100%">
            <thead>
                <tr>
                    <th>
                        VXLAN network identifier
                    </th>
                    <th>
                        Network Id
                    </th>
                    <th>
                        Campus
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var network in Model)
                {
                    <tr>
                        <td width="25%">@network.VNI</td>
                        <td width="25%">@network.Guid</td>
                        <td width="25%">
                            @if (network.OpenVirtualSwitch.Key == "thu")
                            {
                                <p>Technische Hochschule Ulm</p>
                            }
                        </td>
                        <td width="25%">
                            <div class="w-100 btn-group" role="group">
                                <button id="edit" class="btn btn-info mx-1">Edit</button>
                                <button asp-controller="OverlayNetwork" asp-action="Delete" asp-route-Id="@network.Guid" class="btn btn-danger mx-1">Delete</button>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>No items created yet</p>
    }
    <div id="showmodal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">

        </div>
    </div>
</div>

@section Scripts{

    <script>
        $("#networks").on("click", "#edit", function () {
            var id = $(this).closest("tr").find("td").eq(0).html().trim();
             $.ajax({
                url: "@Url.Action("Edit", "OverlayNetwork")",
                data: { id: id },
                 success: function (data) {
                     $("#showmodal .modal-dialog").addClass("modal-xl").html(data);
                    $("#showmodal").modal("show");
                }
            });
        });
    </script>

    <script>
         $("#header").on("click", "#createNetwork", function () {
             $.ajax({
                 url: "@Url.Action("Create", "OverlayNetwork")",
                 data: {},
                 success: function (data) {
                     $("#showmodal .modal-dialog").addClass("modal-xl").html(data);
                    $("#showmodal").modal("show");
                }
            });
        });
    </script>


}


